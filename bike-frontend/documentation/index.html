<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>bike-frontend documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="./images/favicon.ico">
	   <link rel="stylesheet" href="./styles/style.css">
        <link rel="stylesheet" href="./styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>
          <script>
              // --- Iframe navigation tracking for Template Playground ---
              function sendCurrentUrlToParent() {
                  if (window.parent && window.parent !== window) {
                      window.parent.postMessage({
                          type: 'compodoc-iframe-navigate',
                          url: window.location.pathname + window.location.hash
                      }, '*');
                  }
              }
              window.addEventListener('hashchange', sendCurrentUrlToParent, false);
              window.addEventListener('popstate', sendCurrentUrlToParent, false);
              window.addEventListener('DOMContentLoaded', sendCurrentUrlToParent, false);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="./" class="navbar-brand">bike-frontend documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content readme">
                   <div class="content-data">


<h1>Eiffel Bike Corp — Frontend Report</h1>
<p>This report documents the <strong>Angular</strong> frontend implementation for the Eiffel Bike Corp system. The application provides a responsive, role-based interface for university members (students/employees) to rent bikes and for the general public to purchase used corporate bikes.</p>
<hr>
<h2>1. Project Overview</h2>
<h3>1.1 Context</h3>
<p>The frontend acts as the primary interface for <strong>Université Gustave Eiffel</strong> members. It communicates with a JAX-RS (Jersey) backend to manage bike rentals, waiting lists, and a corporate marketplace.</p>
<h3>1.2 Core Objectives</h3>
<ul>
<li><strong>Role-Based Experience:</strong> Tailored UI based on user type (Student, Employee, Corp, or Ordinary).</li>
<li><strong>Reactive State:</strong> Utilization of <strong>Angular Signals</strong> for real-time UI synchronization (basket, user profile, and history).</li>
<li><strong>Seamless Payments:</strong> Integrated checkout flow supporting currency conversion snapshots.</li>
<li><strong>Transparency:</strong> Direct access to bike condition history and return notes.</li>
</ul>
<hr>
<h2>2. Technology Stack</h2>
<ul>
<li><strong>Framework:</strong> Angular 17+ (Standalone Components)</li>
<li><strong>State Management:</strong> Angular Signals &amp; Computed Properties</li>
<li><strong>Styling:</strong> Tailwind CSS (Utility-first framework)</li>
<li><strong>Security:</strong> JWT Authentication with Role-Based Access Control (RBAC)</li>
<li><strong>Communication:</strong> RxJS &amp; HttpClient</li>
</ul>
<hr>
<h2>3. Architecture &amp; Routing</h2>
<h3>3.1 Route Configuration</h3>
<p>The application uses a hybrid routing strategy with a <code>Mainlayout</code> providing a persistent navigation sidebar for authorized users.</p>
<table class="table table-bordered compodoc-table">
<thead>
<tr>
<th align="left">Path</th>
<th align="left">Component</th>
<th align="left">Role Protection</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>/</code></td>
<td align="left"><code>LandingComponent</code></td>
<td align="left">Public</td>
</tr>
<tr>
<td align="left"><code>/login</code></td>
<td align="left"><code>Loginpage</code></td>
<td align="left">Public</td>
</tr>
<tr>
<td align="left"><code>/dashboard</code></td>
<td align="left"><code>Dashboard</code></td>
<td align="left">Student, Employee</td>
</tr>
<tr>
<td align="left"><code>/rentals</code></td>
<td align="left"><code>Myrentals</code></td>
<td align="left">Student, Employee</td>
</tr>
<tr>
<td align="left"><code>/sales</code></td>
<td align="left"><code>MarketplaceComponent</code></td>
<td align="left">Student, Employee, Ordinary</td>
</tr>
<tr>
<td align="left"><code>/offer</code></td>
<td align="left"><code>OfferBikeComponent</code></td>
<td align="left">Student, Employee, Corp</td>
</tr>
</tbody>
</table>
<h3>3.2 Security: Role Guard</h3>
<p>Access is enforced via the <code>roleGuard</code> functional guard. It intercepts navigation by:</p>
<ol>
<li><strong>Token Check:</strong> Verifying the existence of a JWT in <code>localStorage</code>.</li>
<li><strong>Base64 Decoding:</strong> Extracting the <code>type</code> (role) from the JWT payload without a backend round-trip.</li>
<li><strong>Permission Check:</strong> Matching the user role against the <code>allowedRoles</code> defined in the route data.</li>
</ol>
<hr>
<h2>4. Key Component Logic</h2>
<h3>4.1 User Service (<code>UserService</code>)</h3>
<p>The central hub for identity. It uses <strong>Signals</strong> to expose the current user globally. </p>
<ul>
<li>It handles <code>login()</code> by storing the JWT and <code>setUserFromToken()</code> to decode user details (ID, Name, Role) for immediate UI reactivity.</li>
</ul>
<h3>4.2 Marketplace &amp; Basket (<code>MarketplaceComponent</code>)</h3>
<p>Implements the resale flow (US_12–US_19).</p>
<ul>
<li><strong>Signal-based Totals:</strong> The <code>totalEur</code> is a <code>computed</code> signal that updates automatically as the basket changes.</li>
<li><strong>Business Rule Enforcement:</strong> Includes logic to prevent users from adding their own listed bikes to their basket.</li>
<li><strong>Checkout Workflow:</strong> Transitions the user from a browsing state to a <code>Purchase</code> state, locking in the price snapshot before calling the payment API.</li>
</ul>
<h3>4.3 Rentals &amp; History (<code>Myrentals</code>)</h3>
<p>Manages the university rental lifecycle (US_21).</p>
<ul>
<li><strong>Unified Dashboard:</strong> Displays active rentals and waitlist status in one view.</li>
<li><strong>Return Logic:</strong> Collects bike condition and comments, which are then pushed to the backend to notify the next person on the FIFO waiting list.</li>
</ul>
<h3>4.4 Offering Flow (<code>OfferBikeComponent</code>)</h3>
<p>The provider interface for listing inventory.</p>
<ul>
<li><strong>Conditional UI:</strong> Shows the &quot;List for Sale&quot; option only for corporate bikes that meet the &quot;previously rented&quot; criteria.</li>
<li><strong>Bike History:</strong> Allows providers to see all past notes left by renters to track wear and tear.</li>
</ul>
<hr>
<h2>5. UI/UX Implementation</h2>
<h3>5.1 Responsive Layout</h3>
<p>The <code>Mainlayout</code> features a responsive sidebar that adapts to different screen sizes. It uses <code>routerLinkActive</code> to provide visual feedback on the current location.</p>
<h3>5.2 Interaction Design</h3>
<ul>
<li><strong>Modals &amp; Drawers:</strong> Used for checkout and bike details to keep the user in context.</li>
<li><strong>Alert System:</strong> A centralized <code>alert</code> signal provides consistent feedback for success/error states across all forms.</li>
</ul>
<hr>
<h2>6. Integration Notes</h2>
<h3>6.1 Authentication Header</h3>
<p>Most service calls utilize a private helper to inject the Bearer token:</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-typescript">private getHeaders() {
  const token = localStorage.getItem(&#39;token&#39;);
  return new HttpHeaders().set(&#39;Authorization&#39;, `Bearer ${token}`);
}</code></pre></div><h3>6.2 State Persistence</h3>
<p>User session data is mirrored in localStorage to ensure the application remains authenticated upon browser refresh, with UserService re-initializing the signals on startup.</p>
<h2>7. How to Run</h2>
<b>Example :</b><div><pre class="line-numbers"><code class="language-none">npm install
ng serve
http://localhost:4200</code></pre></div><h1>Appendix A. User Manual</h1>
<p>Welcome to the <strong>Eiffel Bike Corp</strong> platform. This guide provides step-by-step instructions on how to use the system based on your user profile (Student, Employee, or External Buyer).</p>
<hr>
<h2>1. Getting Started</h2>
<h3>1.1 Registration &amp; Login</h3>
<ol>
<li>Navigate to the <strong>Landing Page</strong> (<code>/</code>).</li>
<li>Click <strong>Join Now</strong> to create an account.</li>
<li>Select your profile type:<ul>
<li><strong>Student/Employee:</strong> Required for renting bikes and offering bikes.</li>
<li><strong>Ordinary:</strong> For external users who only wish to purchase corporate bikes.</li>
</ul>
</li>
<li>Once registered, log in via the <strong>Login</strong> page to receive your access token.</li>
</ol>
<hr>
<h2>2. For University Members (Students &amp; Employees)</h2>
<h3>2.1 Renting a Bike</h3>
<ol>
<li>Go to the <strong>Dashboard</strong> (Rent a Bike).</li>
<li>Browse the list of available bikes. You can filter by description or daily rate.</li>
<li>Click <strong>Rent Now</strong>.<ul>
<li><strong>If Available:</strong> Your rental starts immediately.</li>
<li><strong>If Unavailable:</strong> You will see an option to <strong>Join Waiting List</strong>. You will be notified when the bike is returned.</li>
</ul>
</li>
</ol>
<h3>2.2 Managing Your Rentals</h3>
<ol>
<li>Navigate to <strong>My Rentals</strong>.</li>
<li><strong>Active Rentals:</strong> View the bikes you currently have.</li>
<li><strong>Returning a Bike:</strong> * Click the <strong>Return</strong> button.<ul>
<li>Select the bike&#39;s condition (Good, Fair, Poor).</li>
<li>Add a mandatory note describing any issues (e.g., &quot;Chain is squeaky&quot;).</li>
</ul>
</li>
<li><strong>Waitlist:</strong> Check your position in the queue for bikes you are waiting for.</li>
</ol>
<h3>2.3 Offering Your Bike for Rent</h3>
<ol>
<li>Navigate to <strong>Offer a Bike</strong>.</li>
<li>Fill out the form:<ul>
<li><strong>Description:</strong> Brand, color, and model.</li>
<li><strong>Daily Rate:</strong> Set your price in EUR.</li>
</ul>
</li>
<li>Click <strong>Submit</strong>. Your bike is now visible in the catalog for other members to rent.</li>
</ol>
<hr>
<h2>3. For Buyers (All Users)</h2>
<h3>3.1 Browsing the Marketplace</h3>
<ol>
<li>Go to <strong>Buy a Bike</strong> (Marketplace).</li>
<li>Search for used corporate bikes listed by Eiffel Bike Corp.</li>
<li>Click <strong>View Details</strong> to see the bike’s rental history and condition notes.</li>
</ol>
<h3>3.2 Shopping Basket &amp; Checkout</h3>
<ol>
<li>Click <strong>Add to Basket</strong> on a bike you want.</li>
<li>Open your <strong>Basket</strong> (right-side drawer).</li>
<li>Review the total price. Note: The price is locked in EUR.</li>
<li>Click <strong>Checkout</strong>.</li>
<li>Enter your payment details:<ul>
<li>Select your preferred <strong>Currency</strong> (USD, GBP, etc.).</li>
<li>The system will show the real-time conversion rate.</li>
</ul>
</li>
<li>Click <strong>Confirm Payment</strong>. Once processed, the bike is yours!</li>
</ol>
<hr>
<h2>4. For Corporate Administrators</h2>
<h3>4.1 Selling Corporate Bikes</h3>
<ol>
<li>Go to <strong>Offer a Bike</strong>.</li>
<li>View the list of company-owned bikes.</li>
<li>If a bike has been rented at least once, the <strong>List for Sale</strong> button will appear.</li>
<li>Set an <strong>Asking Price</strong> and add detailed sales notes before listing it on the public marketplace.</li>
</ol>
<hr>
<h2>5. Frequently Asked Questions (FAQ)</h2>
<blockquote>
<p><strong>Q: Can I buy my own bike?</strong> &gt; A: No. The system prevents users from adding their own listed bikes to their shopping basket.</p>
<p><strong>Q: How does the waiting list work?</strong> &gt; A: It follows a First-In, First-Out (FIFO) rule. The first person to join the list gets the bike the moment the previous renter returns it.</p>
<p><strong>Q: Can I pay in USD?</strong> &gt; A: Yes. While the system operates in EUR, the payment gateway handles conversion automatically using a real-time FX snapshot.</p>
</blockquote>
<hr>
<h2>6. Support &amp; Troubleshooting</h2>
<ul>
<li><strong>Token Expired:</strong> If you are suddenly redirected to the login page, your session has expired. Please log in again.</li>
<li><strong>Unauthorized Access:</strong> If a menu item is missing, your user profile (e.g., Ordinary) may not have permission to access that feature.</li>
</ul>
<hr>
























                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 0;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'readme';
            var COMPODOC_CURRENT_PAGE_URL = 'index.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="./js/libs/custom-elements.min.js"></script>
       <script src="./js/libs/lit-html.js"></script>

       <script src="./js/menu-wc.js" defer></script>
       <script nomodule src="./js/menu-wc_es5.js" defer></script>

       <script src="./js/libs/bootstrap-native.js"></script>

       <script src="./js/libs/es6-shim.min.js"></script>
       <script src="./js/libs/EventDispatcher.js"></script>
       <script src="./js/libs/promise.min.js"></script>

       <script src="./js/compodoc.js"></script>

       <script src="./js/tabs.js"></script>
       <script src="./js/menu.js"></script>
       <script src="./js/libs/clipboard.min.js"></script>
       <script src="./js/libs/prism.js"></script>
       <script src="./js/sourceCode.js"></script>
          <script src="./js/search/search.js"></script>
          <script src="./js/search/lunr.min.js"></script>
          <script src="./js/search/search-lunr.js"></script>
          <script src="./js/search/search_index.js"></script>
       <script src="./js/lazy-load-graphs.js"></script>


    </body>
</html>
